<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>async/await (ES8)</title>
</head>
<body>
    <button type='button' id='btn'>버튼</button>

    <script>
        async function click(){
            var pro = new Promise(function(resolve, reject){
                document.querySelector('#btn').addEventListener('click', function(){
                    resolve('성공했어요');
                });
            });
            var result = await pro;
            console.log(result);
        }
        click();


        async function sum(){
            var pro = new Promise(function(resolve, reject){
                var calc = 1 + 1;
                reject(calc);
            });
            try {
                var result = await pro;
                console.log(result);
            } catch {
                console.log('실패함 ㅠ');
            }
            //try { 이걸해보고 } catch { 에러가 나면 이걸 실행해주세요 }
            /*
            var result = await pro; 
            //await : 
            //  - async 안에서만 쓸 수 있는 키워드. promise가 해결될 때까지 기다려.
            //  - promise 실패시 에러. 멈춤
            console.log(result);
            //pro.then(function(){
            //    console.log('성공');
            //});
            */

        }
        sum();
        
        /*
        async function sum(){
            //return Promise.reject('실패임')
            return 1 + 1;
        }
        // async만 붙이면 promise가 남음.
        // async는 성공만 판정이 가능. 강제로 실패로 전달은 가능.

        sum().then(function(result){ // 첫번째 parameter가 return 값
            console.log(result);
        }).catch(function(result){
            console.log(result);
        });
        */
    </script>
</body>
</html>